<%# app/views/list_items/new.html.erb %>
<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <div class="flex items-center gap-4 mb-8">
      <%= link_to list_items_path, 
          class: "text-gray-600 hover:text-gray-800 transition-colors" do %>
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      <% end %>
      
      <h1 class="text-3xl font-bold text-gray-900">
        <% if params[:parent_id].present? %>
          Nuovo Sotto-elemento
          <div class="text-sm text-gray-600 font-normal mt-1">
            Sotto: "<%= ListItem.find(params[:parent_id]).title %>"
          </div>
        <% else %>
          Nuovo Elemento
        <% end %>
      </h1>
    </div>

    <div class="bg-white rounded-lg shadow-sm border p-6">
      <%= form_with model: @list_item, local: true do |form| %>
        <% if @list_item.errors.any? %>
          <div class="bg-red-50 border border-red-200 rounded-md p-4 mb-6">
            <h4 class="text-red-800 font-semibold mb-2">Errori:</h4>
            <ul class="text-red-700 space-y-1">
              <% @list_item.errors.full_messages.each do |message| %>
                <li>â€¢ <%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <% if params[:parent_id].present? %>
          <%= form.hidden_field :parent_id, value: params[:parent_id] %>
        <% end %>

        <div class="space-y-6">
          <div>
            <%= form.label :title, "Titolo", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_field :title, 
                class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                placeholder: "Inserisci il titolo..." %>
          </div>

          <div>
            <%= form.label :content, "Descrizione", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_area :content, 
                rows: 4,
                class: "w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                placeholder: "Descrizione opzionale del contenuto..." %>
          </div>

          <div class="flex gap-4">
            <%= form.submit params[:parent_id].present? ? "Crea Sotto-elemento" : "Crea Elemento", 
                class: "bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md transition-colors" %>
            
            <%= link_to "Annulla", 
                list_items_path, 
                class: "bg-gray-300 hover:bg-gray-400 text-gray-700 px-6 py-2 rounded-md transition-colors" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
